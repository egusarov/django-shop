{% extends "layout/base.html" %}
{% load static %}

{% block title %}My Account | Hop & Barley{% endblock %}

{% block content %}
    <main class="account-page-wrapper">
        <div class="account-container">

            <!-- Tabs Navigation -->
            <div class="account-tabs">
                <button class="account-tab active" data-tab-target="#order-history">
                    Order History
                </button>
                <button class="account-tab" data-tab-target="#account-info">
                    Account Information
                </button>
            </div>

            <!-- Tabs Content -->
            <div class="tab-content">

                <!-- ========== ORDER HISTORY ========== -->
                <div id="order-history" class="tab-pane active">

                    <div class="order-history-table">

                        <div class="order-table-header">
                            <div class="order-table-cell">Order Details</div>
                            <div class="order-table-cell">Order Status</div>
                            <div class="order-table-cell">Total</div>
                        </div>

                        <div class="order-table-body">

                            {% for order in orders %}
                                <div class="order-table-row">
                                    <div class="order-table-cell">
                                        <span class="order-id">#{{ order.id }}</span>
                                        <span class="order-date">{{ order.created_at|date:"d M Y" }}</span>
                                    </div>

                                    <div class="order-table-cell">
                                        <span class="order-status">{{ order.get_status_display }}</span>
                                    </div>

                                    <div class="order-table-cell">
                                        <span class="order-total">${{ order.total_price }}</span>
                                    </div>
                                </div>
                            {% empty %}
                                <p>No orders yet</p>
                            {% endfor %}

                        </div>
                    </div>

                    <!-- Pagination (if needed later) -->
                    <!--
                    <div class="account-pagination">
                        <a href="#" class="pagination-link-account disabled">← Previous</a>
                        <a href="#" class="pagination-link-account">Next →</a>
                    </div>
                    -->

                </div>

                <!-- ========== ACCOUNT INFORMATION ========== -->
                <div id="account-info" class="tab-pane">
                    <div class="account-form-container">
                        <h2 class="account-form-title">Personal Info</h2>

                        <form method="post" action="{% url 'users:account' %}" id="account-info-form">
                            {% csrf_token %}

                            {{ form.non_field_errors }}

                            <div class="checkout-form-group">
                                <label>Full Name</label>
                                {{ form.full_name }}
                            </div>

                            <div class="checkout-form-group">
                                <label>Phone</label>
                                {{ form.phone }}
                            </div>

                            <div class="checkout-form-group">
                                <label>Email</label>
                                {{ form.email }}
                            </div>

                            <div class="checkout-form-group">
                                <label>City</label>
                                {{ form.city }}
                            </div>

                            <div class="checkout-form-group">
                                <label>Shipping address</label>
                                {{ form.address }}
                            </div>

                            <button type="submit" class="button button--primary button--full-width">
                                Save
                            </button>

                            <a href="{% url 'logout' %}"
                               class="button button--secondary button--full-width">
                                Logout
                            </a>

                        </form>
                    </div>
                </div>

            </div>
        </div>
    </main>
{% endblock %}